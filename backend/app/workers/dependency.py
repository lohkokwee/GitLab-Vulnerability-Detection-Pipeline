from contextlib import contextmanager
from sqlalchemy.orm import Session

@contextmanager
def contextual_get_db(session: Session):
  db = session()
  try:
    yield db
  finally:
    db.close()