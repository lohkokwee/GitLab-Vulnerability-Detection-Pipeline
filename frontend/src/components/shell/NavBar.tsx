"use client"

import * as React from "react"
import Link from "next/link"
import { Shrub } from "lucide-react"

import {
  NavigationMenu,
  NavigationMenuItem,
  NavigationMenuLink,
  NavigationMenuList,
  navigationMenuTriggerStyle,
} from "@/components/ui/navigation-menu"
import {
  Tooltip,
  TooltipContent,
  TooltipProvider,
  TooltipTrigger,
} from "@/components/ui/tooltip"
import { Input } from "../ui/input"

import { ModeToggle } from "../shared/buttons/mode-toggle"
import { TypographyP } from "../shared/typography/typography-p"

const NAV_LINKS: { seq: number, title: string; href: string; description: string }[] = [
  {
    seq: 1,
    title: "Home",
    href: "/",
    description: "A simple dashbaord containing the aggregated statuses of all ongoing jobs."
  },
  {
    seq: 2,
    title: "Jobs",
    href: "/jobs",
    description: "Shows all historical jobs handled."
  },
]

const NavBar = () => {
  return (
    <nav className="border-b border-dashed">
      <div className="w-10/12 max-w-7xl m-auto">
        <div className="flex items-center justify-between h-16">
          {renderLogo()}
          {renderNavMenu()}
          {renderModeToggle()}
        </div>
      </div>
    </nav>
  )
}

const renderLogo = () => {
  return <Shrub className="h-[1.2rem] w-[1.2rem]" />
}

const renderNavMenu = () => {
  return (
    <NavigationMenu>
      <NavigationMenuList>
        {NAV_LINKS.map((link) => (
          <NavigationMenuItem key={link.seq}>
            <TooltipProvider>
              <Tooltip>
                <TooltipTrigger>
                  <Link href={link.href} legacyBehavior passHref>
                    <NavigationMenuLink className={navigationMenuTriggerStyle()}>
                      {link.title}
                    </NavigationMenuLink>
                  </Link>
                </TooltipTrigger>
                <TooltipContent>
                  <TypographyP text={link.description} />
                </TooltipContent>
              </Tooltip>
            </TooltipProvider>
          </NavigationMenuItem>
        ))}
        <NavigationMenuItem>
          <Input
            placeholder="Search for a job by its Job ID..."
            className="h-8 w-[150px] lg:w-[250px]"
          />
        </NavigationMenuItem>
      </NavigationMenuList>
    </NavigationMenu>
  )
}

const renderModeToggle = () => {
  return <ModeToggle />
}

export { NavBar }
