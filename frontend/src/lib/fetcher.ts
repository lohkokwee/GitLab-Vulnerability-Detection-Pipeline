const fetcher = (...args: Parameters<typeof fetch>) =>
  fetch(
    ...args
  ).then(res => {
    if (!res.ok) {
      return res.json().then(errorData => {
        const error = new Error(`An error occurred while fetching the data. Status ${res.status}.`);
        error.name = res.status.toString()
        error.cause = errorData
        throw error;
      });
    }

    return res.json();
  });

export { fetcher };