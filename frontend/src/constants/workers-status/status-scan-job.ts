import { 
  LucideIcon,
  Circle,
  TimerIcon,
  CircleCheck,
  CircleAlert,
  DatabaseIcon,
  GitlabIcon,
} from "lucide-react"

import { IStatusScanJob } from "@/types/workers-status/status-scan-job"

interface IDataTableFilteredFields {
  value: string,
  label: string, 
  icon: LucideIcon,
}

const STATUSES: IDataTableFilteredFields[] = [
  {
    value: "not_started",
    label: "Not started",
    icon: Circle,
  },
  {
    value: "in_progress",
    label: "In progress",
    icon: TimerIcon,
  },
  {
    value: "success",
    label: "Success",
    icon: CircleCheck,
  },
  {
    value: "failure",
    label: "Failure",
    icon: CircleAlert,
  },
]

type IScanJobTasksKey = keyof IStatusScanJob

interface IScanJobTasksAccessor {
  key: number,
  accessor: IScanJobTasksKey,
  label: string,
  description: string,
  responsibilityIcon: LucideIcon,
}

const SCAN_JOB_TASKS: IScanJobTasksAccessor[] = [
  {
    key: 1,
    accessor: "db_get_job_task",
    label: "Saved Job Retrieval",
    description: "Server side retrieval of the previously saved job.",
    responsibilityIcon: DatabaseIcon,
  },
  {
    key: 2,
    accessor: "gitlab_get_related_files_task",
    label: "Retrieve Relevant Files",
    description: "Retrieval of files from GitLab based on diffs from the commit.",
    responsibilityIcon: GitlabIcon,
  },
  {
    key: 3,
    accessor: "scan_run_task",
    label: "Security Scan",
    description: "Scanning files on the server to determine code vulnerabilities and any remediations.",
    responsibilityIcon: DatabaseIcon,
  },
  {
    key: 4,
    accessor: "db_create_and_save_task",
    label: "Generate and Save Report",
    description: "Generation of security report on server based on vulnerabilities and remediations identified.",
    responsibilityIcon: DatabaseIcon,
  },
  {
    key: 5,
    accessor: "gitlab_trigger_job_task",
    label: "Trigger Artifact Retrieval",
    description: "Triggering of follow up job on GitLab to retrieve furnished security report on server.",
    responsibilityIcon: GitlabIcon,
  },
]

export { type IDataTableFilteredFields, STATUSES, SCAN_JOB_TASKS }
